<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">

    <Dialog
        id="addEntryDialog"
        title="Add New Time Entry"
        contentWidth="350px"
        titleAlignment="Center">

        <content>
            <VBox class="sapUiMediumMarginBeginEnd sapUiSmallMarginTopBottom">
                <!-- Activity Date -->
                <VBox class="sapUiTinyMarginBottom">
                    <Label text="Activity Date:" design="Bold" required="true" class="sapUiTinyMarginBottom" />
                    <DatePicker
                        value="{timeEntryModel>/newEntry/selectedDate}"
                        placeholder="Select any date in the week"
                        
                        change="onEntryDatePickerChange"
                        width="100%" />
                </VBox>

                <!-- Project Selection -->
                <VBox class="sapUiTinyMarginBottom">
                  <Label text="Project:" design="Bold" required="true" class="sapUiTinyMarginBottom" />
<ComboBox
    id="projectShow"
    selectedKey="{timeEntryModel>/newEntry/projectId}"
    items="{timeEntryModel>/projectsToShow}"
    placeholder="Select a Project"
    change="onProjectChange"
    width="100%">
    <core:Item key="{timeEntryModel>id}" text="{timeEntryModel>name}" />
</ComboBox>

                </VBox>

                <!-- Task Selection -->
               <!-- Task / Leave Selection -->
<VBox class="sapUiTinyMarginBottom">

    <!-- TASK LABEL -->
    <Label 
        text="Task:" 
        design="Bold" 
        required="true"
        class="sapUiTinyMarginBottom"
        visible="{= !${timeEntryModel>/newEntry/isLeaveSelected} }" />

    <!-- TASK DROPDOWN -->
    <ComboBox
        visible="{= !${timeEntryModel>/newEntry/isLeaveSelected} }"
        items="{timeEntryModel>/tasksToShow}"
         placeholder="Select Task"
         enabled="{= !${timeEntryModel>/isTaskDisabled} }"
        width="100%"
        selectedKey="{timeEntryModel>/newEntry/workType}">
        <core:Item key="{timeEntryModel>type}" text="{timeEntryModel>name}" />
    </ComboBox>


    <!-- LEAVE LABEL -->
    <Label 
        text="Leave Type:" 
        design="Bold" 
        required="true"
        class="sapUiTinyMarginBottom"
        visible="{timeEntryModel>/newEntry/isLeaveSelected}" />

    <!-- LEAVE TYPE DROPDOWN -->
   <ComboBox
    visible="{timeEntryModel>/newEntry/isLeaveSelected}"
    items="{timeEntryModel>/leaveTypes}"
     placeholder="Select Type"
    width="100%"
    selectedKey="{timeEntryModel>/newEntry/leaveType}"
    change="onLeaveTypeChange">
    <core:Item key="{timeEntryModel>id}" text="{timeEntryModel>name}" />
</ComboBox>


</VBox>


                <!-- Hours -->
                <VBox class="sapUiTinyMarginBottom">
                    <Label text="Hours:" design="Bold" required="true" class="sapUiTinyMarginBottom" />
                    <ComboBox
        editable="{timeEntryModel>/isHoursEditable}"
        selectedKey="{timeEntryModel>/newEntry/hours}"
        placeholder="Select Hours"
        width="100%"
        items="{
            path: 'timeEntryModel>/allowedLeaveHours'
        }">

        <core:Item key="{timeEntryModel>key}" text="{timeEntryModel>text}" />

    </ComboBox>
                </VBox>

                <!-- Task Details -->
                <VBox>
                    <Label text="Task Details:" design="Bold" required="true" class="sapUiTinyMarginBottom" />
                    <TextArea
                        id="taskDetailsTextArea"
                        value="{timeEntryModel>/newEntry/taskDetails}"
                        rows="4"
                        placeholder="Enter task details"
                        width="100%" />
                </VBox>
            </VBox>
        </content>

        <buttons>
            <Button
                text="Save"
                type="Emphasized"
                id="idSaveBtn"
                icon="sap-icon://save"
                press="onSaveNewEntry" />
            <Button
                text="Save"
                icon="sap-icon://add"
                press="onSaveAndNewEntry" />
            <Button
                text="Cancel"
                icon="sap-icon://decline"
                press="onCancelNewEntry" />
        </buttons>
    </Dialog>
</core:FragmentDefinition>